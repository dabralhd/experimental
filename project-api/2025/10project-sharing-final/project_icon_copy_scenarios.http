@hd_test_group = sp4n95r2rc4he7b4rpzdpqtj10
@jana_group = fv7er6m9prcy7emqeb531xwj10
@andrea_group = wav5ndzp5e89pe210zbqnqzj10
@harsh_admin_group = mq1zcse1zpzjff9bxpmwsg2k10
@local_port = 9090
@remote_port = 443
@local_api_base_path = /3
@remote_api_base_path = /svc/project-api
@remote_api_base_path_3 = /svc/project-api/3
@local_url = http://127.0.0.1:{{local_port}}{{local_api_base_path}}
@remote_url = https://vespucci.st.com:{{remote_port}}{{remote_api_base_path}}
@remote_dev_url = https://dev.stm-vespucci.com:{{remote_port}}{{remote_api_base_path_3}}
@base_url = {{remote_dev_url}}
@token-dummy = dev
@token-dev = eyJraWQiOiJcL3JIS3FCbG5JVldiU2RqdEJqODRQaDNyUk5SWWh4cnR6RFwvOXFTK0Q3aWc9IiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiIzMzRjNjVhNS0xNDk1LTQ1M2EtYTZkZS00ZDM4NGE3ODEwMDAiLCJjb2duaXRvOmdyb3VwcyI6WyJ3aGl0ZWxpc3QiXSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfOXdlbnNFNVJaIiwidmVyc2lvbiI6MiwiY2xpZW50X2lkIjoiNHNoYjE3OGdsbWxsc3I3NWdmb2JoZmRzYmEiLCJvcmlnaW5fanRpIjoiZGU4MzMxYTMtZDg0Zi00OWYyLWFmYTEtNDY2OTI3MDFhZTEzIiwiZXZlbnRfaWQiOiI4ZWJhOTgyOS1iYWQwLTRiNDUtYjVhYS05ZmM1NzYzZjY2MTgiLCJ0b2tlbl91c2UiOiJhY2Nlc3MiLCJzY29wZSI6ImF3cy5jb2duaXRvLnNpZ25pbi51c2VyLmFkbWluIGh0dHBzOlwvXC9vYXV0aDIuZGV2LnN0bS12ZXNwdWNjaS5jb21cL3Rlc3QgcGhvbmUgb3BlbmlkIHByb2ZpbGUgZW1haWwiLCJhdXRoX3RpbWUiOjE3NTUwNTgwMDMsImV4cCI6MTc1NzQ4MTM3OCwiaWF0IjoxNzU3Mzk0OTc4LCJqdGkiOiJjZDlmNWYzYS1jMGM1LTRiNmItYmMxZC1hYjA5ZjY1ZWRiZGEiLCJ1c2VybmFtZSI6IjMzNGM2NWE1LTE0OTUtNDUzYS1hNmRlLTRkMzg0YTc4MTAwMCJ9.OJlRSB6GzGMWmSu0d2PezAjJR66fMpPnBt-a2VFHxcVQ5bXXtBIquJ3bhVopWWqGPnNgB7s27tULi7Tl52D1iZbW9yGplQb1dP9rCl1_shHCywEeeI1y3XAw6uo01FyoeOWWoxHtoa2sZpTW_5zMzVLqwj9rLV0shk3W6LDiO5m2eFk7yBvcytgnAOhoMc07vaTrO1VpA0SEZGGjvtQ4hEE75w759NIdpPg9B_Rflprva_zkJ9hqb7VeU77fCzL1v187S9C7R59DztMvcuvIAJHpqQFIkIOgJu0sdkIdFvPYyGg70CpSjFpQRxNixkvFd9bQurOOLliKqIjcmTO06g

@token = {{token-dev}}

@probe_url = http://127.0.0.1:{{local_port}}

@test_group_name = {{hd_test_group}}
@unique_project_name = test-project-111
@andrea_owned_project = "TestPrj"
@unique_model_name = smart_asset_tracking

## Verify that access token is right
GET {{base_url}}/projects
Authorization: Bearer {{token}}
Content-Type: application/json

# Senario #1:
# clone template project to user ws
# clone from user ws to group ws
# see the icon


### STEP 1.1
POST {{base_url}}/projects
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "project_name_to_clone": "get_started_smart_asset_tracking_mlc",
  "ai_project_name": "uproject1"
}

### STEP 1.2
POST {{base_url}}/projects?is_user_project=True&as_org={{test_group_name}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "project_name_to_clone": "uproject1",
  "ai_project_name": "gproject1"
}

### STEP 1.3
GET {{base_url}}/projects/gproject1/icon?as_org={{test_group_name}}
Authorization: Bearer {{token}}
Content-Type: application/json

### Verify scenario 1
GET {{base_url}}/projects/uproject1/icon
Authorization: Bearer {{token}}
Content-Type: application/json

# Senario #2:
# clone a template project to user ws
# clone user project to group ws
# clone back from group ws to user ws with a new name
# see the icon

### STEP 2.1
POST {{base_url}}/projects
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "project_name_to_clone": "get_started_smart_asset_tracking_mlc",
  "ai_project_name": "user_project_2"
}


### STEP 2.2
POST {{base_url}}/projects?is_user_project=True&as_org={{test_group_name}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "project_name_to_clone": "user_project_2",
  "ai_project_name": "group-user_project_2-clone"
}

### STEP 2.3
POST {{base_url}}/projects?as_org={{test_group_name}}&is_org_project=True&from_org_to_user=True
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "project_name_to_clone": "group-user_project_2-clone",
  "ai_project_name": "user-group-user_project_2-clone-clone"
}

### Verify scenario 2
GET {{base_url}}/projects/user-group-user_project_2-clone-clone/icon
Authorization: Bearer {{token}}
Content-Type: application/json
